// Autogenerated from server.tmpl

package main

import (
	"os"

	"github.com/merliot/dean"
	"github.com/merliot/hub/models/{{.model}}"
)

func main() {
	thing := {{.model}}.New("{{.id}}", "{{.model}}", "{{.name}}").(*{{.model}}.{{.modelStruct}})
	thing.SetDeployParams("{{.deployParams}}")

	os.Setenv("PORT", "{{.port}}")
	os.Setenv("USER", "{{.user}}")
	os.Setenv("PASSWD", "{{.passwd}}")
	os.Setenv("DIAL_URLS", "{{.hub}},{{.backupHub}}")

	server := dean.NewServer(thing)
	server.Dial()
	server.Run()
}
